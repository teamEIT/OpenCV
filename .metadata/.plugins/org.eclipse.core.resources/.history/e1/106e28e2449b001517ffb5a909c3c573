#include "opencv2/highgui/highgui.hpp"
#include "opencv2/core/core.hpp"

#include <iostream>
#include <string>

using namespace std;
using namespace cv;

int main(int argc, char** argv)	{
	cout << "The first program." << endl;
	string imageName("logo.png");
	string windowName("Read image");

	if(argc > 1) {
		imageName = argv[1];
	}

	Mat image = imread(imageName.c_str(), CV_LOAD_IMAGE_COLOR); // IMREAD_COLOR: Read the image.
	if(image.empty()) { // Check for invalid input
		cout << "Could not open or find the image" << endl;
		return -1;
	}
	namedWindow(windowName.c_str(), CV_WINDOW_AUTOSIZE); // Create a window for display.
	imshow(windowName.c_str(), image); // Show our image inside it.

	Mat grayImage; // Create a gray image.
	string grayImageName = ("logoGray.png");
	string windowName2("Gray image");

	cvtColor(image, grayImage, COLOR_BGR2GRAY); // convert rgb to gray
	imwrite(grayImageName, grayImage);

	namedWindow(windowName2.c_str(), CV_WINDOW_AUTOSIZE);
	waitKey(0);
	return 0;
}
